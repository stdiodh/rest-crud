# ğŸ¤ REST CRUD â€” ì•„ì´ëŒ API

> A&I 4ê¸° Code Lab | RESTful API & CRUD ì‹¤ìŠµ ë ˆí¬ì§€í† ë¦¬ì…ë‹ˆë‹¤.

---

## ğŸ“‹ ì„¸ì…˜ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì£¼ì œ | RESTful API ì„¤ê³„ & CRUD êµ¬í˜„ |
| ìŠ¤íƒ | Kotlin, Spring Boot 4.0.2 |
| ë„ë©”ì¸ | ì•„ì´ëŒ (Idol) |

---

## ğŸ¯ í•™ìŠµ ëª©í‘œ

- REST APIê°€ ë¬´ì—‡ì¸ì§€ ì´í•´í•œë‹¤.
- HTTP Method(GET, POST, PUT, DELETE)ì˜ ì—­í• ì„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
- Spring Bootì—ì„œ Controller â†’ Service íë¦„ì„ ì´í•´í•˜ê³  êµ¬í˜„í•œë‹¤.
- `// TODO` ì£¼ì„ì„ ì±„ì›Œ ì•„ì´ëŒ CRUD APIë¥¼ ì™„ì„±í•œë‹¤.

---

## ğŸ“– ì´ë¡ 

### RESTë€?

REST(Representational State Transfer)ëŠ” **ìì›(Resource)ì„ URIë¡œ í‘œí˜„**í•˜ê³ , **HTTP Methodë¡œ í–‰ìœ„ë¥¼ ì •ì˜**í•˜ëŠ” ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì´ì—ìš”.

ì˜ˆë¥¼ ë“¤ì–´ ì•„ì´ëŒ ì •ë³´ë¥¼ ë‹¤ë£° ë•Œ ì´ë ‡ê²Œ í‘œí˜„í•´ìš”.

| í–‰ìœ„ | ë‚˜ìœ ì˜ˆ (REST ì•„ë‹˜) | ì¢‹ì€ ì˜ˆ (REST) |
|------|------------------|--------------|
| ëª©ë¡ ì¡°íšŒ | `GET /getIdols` | `GET /idols` |
| ë‹¨ê±´ ì¡°íšŒ | `GET /getIdol?id=1` | `GET /idols/1` |
| ë“±ë¡ | `POST /createIdol` | `POST /idols` |
| ìˆ˜ì • | `POST /updateIdol` | `PUT /idols/1` |
| ì‚­ì œ | `GET /deleteIdol?id=1` | `DELETE /idols/1` |

URIì—ëŠ” **ëª…ì‚¬**ë§Œ ì“°ê³ , í–‰ìœ„ëŠ” **HTTP Method**ë¡œ í‘œí˜„í•˜ëŠ” ê²Œ í•µì‹¬ì´ì—ìš”.

---

### HTTP Method

| Method | ì—­í•  | ìš”ì²­ Body | ì‘ë‹µ ì½”ë“œ |
|--------|------|-----------|-----------|
| `GET` | ì¡°íšŒ | âŒ | 200 OK |
| `POST` | ìƒì„± | âœ… | 201 Created |
| `PUT` | ìˆ˜ì • (ì „ì²´ êµì²´) | âœ… | 200 OK |
| `DELETE` | ì‚­ì œ | âŒ | 204 No Content |

---

### HTTP ì‘ë‹µ ì½”ë“œ

ìì£¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë§Œ ì •ë¦¬í–ˆì–´ìš”.

| ì½”ë“œ | ì˜ë¯¸ | ì–¸ì œ ì“°ë‚˜ |
|------|------|-----------|
| `200 OK` | ì„±ê³µ | ì¡°íšŒ, ìˆ˜ì • ì„±ê³µ |
| `201 Created` | ìƒì„± ì„±ê³µ | POST ìš”ì²­ ì„±ê³µ |
| `204 No Content` | ì„±ê³µ (ë°˜í™˜ê°’ ì—†ìŒ) | ì‚­ì œ ì„±ê³µ |
| `400 Bad Request` | ì˜ëª»ëœ ìš”ì²­ | ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ |
| `404 Not Found` | ìì› ì—†ìŒ | ì—†ëŠ” ID ì¡°íšŒ |
| `500 Internal Server Error` | ì„œë²„ ì˜¤ë¥˜ | ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ |

---

### ê³„ì¸µ êµ¬ì¡°

Spring Bootì—ì„œ APIëŠ” ë‹¤ìŒ 3ê°œì˜ ê³„ì¸µìœ¼ë¡œ ë‚˜ë‰˜ì–´ìš”.

```
Client (Postman ë“±)
    â”‚  HTTP ìš”ì²­/ì‘ë‹µ
    â–¼
Controller   â†’  ìš”ì²­ì„ ë°›ê³  ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ì°½êµ¬
    â”‚
    â–¼
Service      â†’  ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë“¤ì–´ê°€ëŠ” ê³³
    â”‚
    â–¼
(ë‹¤ìŒ ì£¼ì°¨)  â†’  DB ì ‘ê·¼ (ì§€ê¸ˆì€ ì¸ë©”ëª¨ë¦¬ List ì‚¬ìš©)
```

ControllerëŠ” ìš”ì²­ì„ ë°›ì•„ì„œ Serviceì— ìœ„ì„í•˜ê³ , ServiceëŠ” ë¡œì§ì„ ì²˜ë¦¬í•´ì„œ ê²°ê³¼ë¥¼ ëŒë ¤ì¤˜ìš”.

---

## ğŸ”‘ í•µì‹¬ ì–´ë…¸í…Œì´ì…˜

### Controller ê´€ë ¨

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
|-----------|------|
| `@RestController` | ì´ í´ë˜ìŠ¤ê°€ REST API Controllerì„ì„ ì„ ì–¸. ëª¨ë“  ë©”ì„œë“œì˜ ë°˜í™˜ê°’ì´ ìë™ìœ¼ë¡œ JSONìœ¼ë¡œ ë³€í™˜ë¼ìš”. |
| `@RequestMapping("/idols")` | ì´ Controllerì˜ ê¸°ë³¸ URLì„ `/idols`ë¡œ ì„¤ì •í•´ìš”. |
| `@GetMapping` | HTTP GET ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œì— ë¶™ì—¬ìš”. |
| `@PostMapping` | HTTP POST ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œì— ë¶™ì—¬ìš”. |
| `@PutMapping("/{id}")` | HTTP PUT ìš”ì²­ì„ ì²˜ë¦¬í•´ìš”. `{id}`ëŠ” URL ê²½ë¡œì˜ ë³€ìˆ˜ì˜ˆìš”. |
| `@DeleteMapping("/{id}")` | HTTP DELETE ìš”ì²­ì„ ì²˜ë¦¬í•´ìš”. |
| `@ResponseStatus(HttpStatus.CREATED)` | ì‘ë‹µ ì½”ë“œë¥¼ ì§€ì •í•´ìš”. ê¸°ë³¸ê°’ì€ 200ì´ì—ìš”. |

### íŒŒë¼ë¯¸í„° ê´€ë ¨

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… | ì˜ˆì‹œ |
|-----------|------|------|
| `@PathVariable` | URL ê²½ë¡œì˜ ë³€ìˆ˜ë¥¼ ë°›ì•„ìš”. | `/idols/1` â†’ `id = 1` |
| `@RequestBody` | HTTP ìš”ì²­ì˜ Body(JSON)ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•´ìš”. | `{"name": "ì¹´ë¦¬ë‚˜"}` â†’ `IdolRequest` |
| `@Valid` | `@RequestBody` ì•ì— ë¶™ì—¬ì„œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í™œì„±í™”í•´ìš”. |  |

### Service ê´€ë ¨

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
|-----------|------|
| `@Service` | ì´ í´ë˜ìŠ¤ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” Serviceì„ì„ ì„ ì–¸í•´ìš”. Springì´ ìë™ìœ¼ë¡œ Beanìœ¼ë¡œ ë“±ë¡í•´ì¤˜ìš”. |

### ìœ íš¨ì„± ê²€ì‚¬ (Validation)

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
|-----------|------|
| `@NotBlank` | ë¬¸ìì—´ì´ nullì´ê±°ë‚˜ ë¹ˆ ê°’ì´ë©´ ì•ˆ ë¼ìš”. |
| `@Min(value)` | ìˆ«ìê°€ ì§€ì •í•œ ìµœì†Ÿê°’ ì´ìƒì´ì–´ì•¼ í•´ìš”. |

---

## ğŸ—‚ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/main/kotlin/com/andi/rest_crud/
â”œâ”€â”€ RestCrudApplication.kt       â† ì•± ì‹œì‘ì 
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ IdolController.kt        â† âœï¸ TODO: API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
â”œâ”€â”€ service/
â”‚   â””â”€â”€ IdolService.kt           â† âœï¸ TODO: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ IdolRequest.kt           â† ìš”ì²­ ë°ì´í„° í˜•ì‹
â”‚   â””â”€â”€ IdolResponse.kt          â† ì‘ë‹µ ë°ì´í„° í˜•ì‹
â””â”€â”€ model/
    â””â”€â”€ Idol.kt                  â† ì•„ì´ëŒ ë°ì´í„° ëª¨ë¸
```

---

## ğŸ“¡ API ëª…ì„¸

### ê¸°ë³¸ URL: `/idols`

#### ì „ì²´ ëª©ë¡ ì¡°íšŒ
```
GET /idols

Response 200
[
  {
    "id": 1,
    "name": "ì¹´ë¦¬ë‚˜",
    "group": "aespa",
    "agency": "SMì—”í„°í…Œì¸ë¨¼íŠ¸",
    "debutYear": 2020
  }
]
```

#### ë‹¨ê±´ ì¡°íšŒ
```
GET /idols/{id}

Response 200
{
  "id": 1,
  "name": "ì¹´ë¦¬ë‚˜",
  "group": "aespa",
  "agency": "SMì—”í„°í…Œì¸ë¨¼íŠ¸",
  "debutYear": 2020
}
```

#### ë“±ë¡
```
POST /idols
Content-Type: application/json

Request Body
{
  "name": "ì¹´ë¦¬ë‚˜",
  "group": "aespa",
  "agency": "SMì—”í„°í…Œì¸ë¨¼íŠ¸",
  "debutYear": 2020
}

Response 201
```

#### ìˆ˜ì •
```
PUT /idols/{id}
Content-Type: application/json

Request Body
{
  "name": "ì¹´ë¦¬ë‚˜",
  "group": "aespa",
  "agency": "SMì—”í„°í…Œì¸ë¨¼íŠ¸",
  "debutYear": 2020
}

Response 200
```

#### ì‚­ì œ
```
DELETE /idols/{id}

Response 204
```

---

## âœï¸ ì‹¤ìŠµ ê°€ì´ë“œ

`// TODO` ì£¼ì„ì´ ìˆëŠ” ê³³ì„ ìˆœì„œëŒ€ë¡œ ì±„ì›Œë³´ì„¸ìš”. ì´ **10ê³³**ì´ì—ìš”.

### ì¶”ì²œ ìˆœì„œ

1. `IdolService.kt` â€” `getAll()` ë¶€í„° ì‹œì‘í•´ìš”. (ê°€ì¥ ë‹¨ìˆœí•´ìš”)
2. `IdolService.kt` â€” `getById()`, `create()`, `update()`, `delete()` ìˆœì„œë¡œ êµ¬í˜„í•´ìš”.
3. `IdolController.kt` â€” Service ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì—°ê²°í•´ìš”.

### ì‹¤ìŠµ íŒ

- Controllerì˜ TODOëŠ” ë‹¨ í•œ ì¤„ì´ì—ìš”. Serviceë¥¼ í˜¸ì¶œí•´ì„œ ë°˜í™˜í•˜ë©´ ë¼ìš”.
- Serviceì˜ TODOëŠ” ì‹¤ì œ ë¡œì§ì´ ë“¤ì–´ê°€ìš”. ê° í•¨ìˆ˜ ìœ„ì˜ íŒíŠ¸ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
- ëª¨ë¥´ê² ìœ¼ë©´ `Idol` í´ë˜ìŠ¤ì™€ `IdolResponse.from()` ì„ ë¨¼ì € ì½ì–´ë³´ì„¸ìš”.

---

## â–¶ï¸ ì‹¤í–‰ ë°©ë²•

```bash
git clone https://github.com/{org}/rest-crud.git
cd rest-crud
git checkout -b feat/í™ê¸¸ë™
```

IntelliJì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì—´ê³  `RestCrudApplication.kt`ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.

Postman ë˜ëŠ” IntelliJ HTTP Clientë¡œ `http://localhost:8080/idols` ì— ìš”ì²­í•´ë³´ì„¸ìš”.

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

ì‹¤ìŠµ ì™„ë£Œ í›„ ìŠ¤ìŠ¤ë¡œ í™•ì¸í•´ë³´ì„¸ìš”.

- [ ] `POST /idols` ë¡œ ì•„ì´ëŒì„ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.
- [ ] `GET /idols` ë¡œ ì „ì²´ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- [ ] `GET /idols/{id}` ë¡œ íŠ¹ì • ì•„ì´ëŒì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- [ ] `PUT /idols/{id}` ë¡œ ì•„ì´ëŒ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
- [ ] `DELETE /idols/{id}` ë¡œ ì•„ì´ëŒì„ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.
- [ ] ì—†ëŠ” ID ì¡°íšŒ ì‹œ ì„œë²„ê°€ í„°ì§€ì§€ ì•Šê³  ì ì ˆí•œ ì—ëŸ¬ê°€ ë°˜í™˜ëœë‹¤.
- [ ] `name`ì„ ë¹„ì›Œì„œ POST ìš”ì²­ ì‹œ 400 ì—ëŸ¬ê°€ ë°˜í™˜ëœë‹¤.

---

## ğŸ’¡ ì •ë‹µ ë ˆí¬

> ì„¸ì…˜ ë‹¹ì¼ ì‹¤ìŠµ ì¢…ë£Œ í›„ ê³µê°œë©ë‹ˆë‹¤.
> ğŸ‘‰ [rest-crud-answer](https://github.com/{org}/rest-crud-answer)
